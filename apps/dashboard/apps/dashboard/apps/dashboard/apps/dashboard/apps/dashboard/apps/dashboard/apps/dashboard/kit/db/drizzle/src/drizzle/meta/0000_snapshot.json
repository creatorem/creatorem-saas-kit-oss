{
    "id": "00000000-0000-0000-0000-000000000000",
    "prevId": "",
    "version": "7",
    "dialect": "postgresql",
    "tables": {
        "public.booking": {
            "name": "booking",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "gen_random_uuid()"
                },
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "title": {
                    "name": "title",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": true
                },
                "description": {
                    "name": "description",
                    "type": "text",
                    "primaryKey": false,
                    "notNull": false
                },
                "type": {
                    "name": "type",
                    "type": "booking_type",
                    "typeSchema": "public",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "'appointment'"
                },
                "status": {
                    "name": "status",
                    "type": "booking_status",
                    "typeSchema": "public",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "'pending'"
                },
                "customer_name": {
                    "name": "customer_name",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": true
                },
                "customer_email": {
                    "name": "customer_email",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": true
                },
                "customer_phone": {
                    "name": "customer_phone",
                    "type": "varchar(50)",
                    "primaryKey": false,
                    "notNull": false
                },
                "customer_notes": {
                    "name": "customer_notes",
                    "type": "text",
                    "primaryKey": false,
                    "notNull": false
                },
                "start_date": {
                    "name": "start_date",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true
                },
                "end_date": {
                    "name": "end_date",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true
                },
                "duration_minutes": {
                    "name": "duration_minutes",
                    "type": "integer",
                    "primaryKey": false,
                    "notNull": false,
                    "generated": {
                        "as": "(EXTRACT(epoch FROM (end_date - start_date)) / (60)::numeric)",
                        "type": "stored"
                    }
                },
                "location": {
                    "name": "location",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": false
                },
                "is_online": {
                    "name": "is_online",
                    "type": "boolean",
                    "primaryKey": false,
                    "notNull": false,
                    "default": false
                },
                "meeting_link": {
                    "name": "meeting_link",
                    "type": "text",
                    "primaryKey": false,
                    "notNull": false
                },
                "price": {
                    "name": "price",
                    "type": "numeric(10, 2)",
                    "primaryKey": false,
                    "notNull": false
                },
                "currency": {
                    "name": "currency",
                    "type": "varchar(3)",
                    "primaryKey": false,
                    "notNull": false,
                    "default": "'USD'"
                },
                "is_paid": {
                    "name": "is_paid",
                    "type": "boolean",
                    "primaryKey": false,
                    "notNull": false,
                    "default": false
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": false,
                    "default": "now()"
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": false,
                    "default": "now()"
                },
                "created_by": {
                    "name": "created_by",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": false
                }
            },
            "indexes": {
                "idx_booking_created_at": {
                    "name": "idx_booking_created_at",
                    "columns": [
                        {
                            "expression": "created_at",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "timestamptz_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                },
                "idx_booking_customer_email": {
                    "name": "idx_booking_customer_email",
                    "columns": [
                        {
                            "expression": "customer_email",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "text_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                },
                "idx_booking_organization_id": {
                    "name": "idx_booking_organization_id",
                    "columns": [
                        {
                            "expression": "organization_id",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "uuid_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                },
                "idx_booking_start_date": {
                    "name": "idx_booking_start_date",
                    "columns": [
                        {
                            "expression": "start_date",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "timestamptz_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                },
                "idx_booking_status": {
                    "name": "idx_booking_status",
                    "columns": [
                        {
                            "expression": "status",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "enum_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                },
                "idx_booking_type": {
                    "name": "idx_booking_type",
                    "columns": [
                        {
                            "expression": "type",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "enum_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                }
            },
            "foreignKeys": {
                "booking_organization_id_fkey": {
                    "name": "booking_organization_id_fkey",
                    "tableFrom": "booking",
                    "tableTo": "organization",
                    "schemaTo": "public",
                    "columnsFrom": ["organization_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                },
                "booking_created_by_fkey": {
                    "name": "booking_created_by_fkey",
                    "tableFrom": "booking",
                    "tableTo": "users",
                    "schemaTo": "auth",
                    "columnsFrom": ["created_by"],
                    "columnsTo": ["id"],
                    "onDelete": "no action",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {},
            "checkConstraints": {
                "valid_dates": {
                    "name": "valid_dates",
                    "value": "end_date > start_date"
                },
                "valid_price": {
                    "name": "valid_price",
                    "value": "price >= (0)::numeric"
                }
            },
            "policies": {
                "Users can view bookings in their organization": {
                    "name": "Users can view bookings in their organization",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["public"],
                    "using": "(organization_id IN ( SELECT m.organization_id\n   FROM organization_member m\n  WHERE (m.user_id = auth.uid())))"
                },
                "Users can create bookings in their organization": {
                    "name": "Users can create bookings in their organization",
                    "as": "PERMISSIVE",
                    "for": "INSERT",
                    "to": ["public"]
                },
                "Users can update bookings in their organization": {
                    "name": "Users can update bookings in their organization",
                    "as": "PERMISSIVE",
                    "for": "UPDATE",
                    "to": ["public"]
                },
                "Users can delete bookings in their organization": {
                    "name": "Users can delete bookings in their organization",
                    "as": "PERMISSIVE",
                    "for": "DELETE",
                    "to": ["public"]
                }
            },
            "isRLSEnabled": true
        },
        "public.booking_tag": {
            "name": "booking_tag",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "gen_random_uuid()"
                },
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "name": {
                    "name": "name",
                    "type": "varchar(50)",
                    "primaryKey": false,
                    "notNull": true
                },
                "color": {
                    "name": "color",
                    "type": "varchar(7)",
                    "primaryKey": false,
                    "notNull": false,
                    "default": "'#3B82F6'"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": false,
                    "default": "now()"
                }
            },
            "indexes": {
                "idx_booking_tag_name": {
                    "name": "idx_booking_tag_name",
                    "columns": [
                        {
                            "expression": "name",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "text_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                },
                "idx_booking_tag_organization_id": {
                    "name": "idx_booking_tag_organization_id",
                    "columns": [
                        {
                            "expression": "organization_id",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "uuid_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                }
            },
            "foreignKeys": {
                "booking_tag_organization_id_fkey": {
                    "name": "booking_tag_organization_id_fkey",
                    "tableFrom": "booking_tag",
                    "tableTo": "organization",
                    "schemaTo": "public",
                    "columnsFrom": ["organization_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {
                "booking_tag_organization_id_name_key": {
                    "columns": ["organization_id", "name"],
                    "nullsNotDistinct": false,
                    "name": "booking_tag_organization_id_name_key"
                }
            },
            "checkConstraints": {},
            "policies": {
                "Users can view booking tags in their organization": {
                    "name": "Users can view booking tags in their organization",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["public"],
                    "using": "(organization_id IN ( SELECT m.organization_id\n   FROM organization_member m\n  WHERE (m.user_id = auth.uid())))"
                },
                "Users can manage booking tags in their organization": {
                    "name": "Users can manage booking tags in their organization",
                    "as": "PERMISSIVE",
                    "for": "ALL",
                    "to": ["public"]
                }
            },
            "isRLSEnabled": true
        },
        "public.user": {
            "name": "user",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "auth.uid()"
                },
                "auth_user_id": {
                    "name": "auth_user_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "auth.uid()"
                },
                "name": {
                    "name": "name",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": true
                },
                "email": {
                    "name": "email",
                    "type": "varchar(320)",
                    "primaryKey": false,
                    "notNull": false
                },
                "profile_url": {
                    "name": "profile_url",
                    "type": "varchar(1000)",
                    "primaryKey": false,
                    "notNull": false
                },
                "phone": {
                    "name": "phone",
                    "type": "varchar",
                    "primaryKey": false,
                    "notNull": false
                },
                "completed_onboarding": {
                    "name": "completed_onboarding",
                    "type": "boolean",
                    "primaryKey": false,
                    "notNull": true,
                    "default": false
                },
                "locale": {
                    "name": "locale",
                    "type": "varchar",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "'en-US'"
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "user_auth_user_id_fkey": {
                    "name": "user_auth_user_id_fkey",
                    "tableFrom": "user",
                    "tableTo": "users",
                    "schemaTo": "auth",
                    "columnsFrom": ["auth_user_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {},
            "checkConstraints": {},
            "policies": {
                "user_create": {
                    "name": "user_create",
                    "as": "PERMISSIVE",
                    "for": "INSERT",
                    "to": ["authenticated"],
                    "withCheck": "(( SELECT auth.uid() AS uid) = auth_user_id)"
                },
                "user_read": {
                    "name": "user_read",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["authenticated"]
                },
                "user_update": {
                    "name": "user_update",
                    "as": "PERMISSIVE",
                    "for": "UPDATE",
                    "to": ["authenticated"]
                },
                "user_delete": {
                    "name": "user_delete",
                    "as": "PERMISSIVE",
                    "for": "DELETE",
                    "to": ["authenticated"]
                }
            },
            "isRLSEnabled": true
        },
        "public.user_setting": {
            "name": "user_setting",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "user_id": {
                    "name": "user_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "name": {
                    "name": "name",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": true
                },
                "value": {
                    "name": "value",
                    "type": "json",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "'{\"json\":null}'::json"
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "user_setting_user_id_fkey": {
                    "name": "user_setting_user_id_fkey",
                    "tableFrom": "user_setting",
                    "tableTo": "user",
                    "schemaTo": "public",
                    "columnsFrom": ["user_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {},
            "checkConstraints": {},
            "policies": {
                "user_setting_all": {
                    "name": "user_setting_all",
                    "as": "PERMISSIVE",
                    "for": "ALL",
                    "to": ["authenticated"],
                    "withCheck": "(EXISTS ( SELECT 1\n   FROM \"user\"\n  WHERE ((\"user\".id = user_setting.user_id) AND (\"user\".auth_user_id = auth.uid()))))",
                    "using": "(EXISTS ( SELECT 1\n   FROM \"user\"\n  WHERE ((\"user\".id = user_setting.user_id) AND (\"user\".auth_user_id = auth.uid()))))"
                }
            },
            "isRLSEnabled": true
        },
        "public.notification": {
            "name": "notification",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "user_id": {
                    "name": "user_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "dismissed": {
                    "name": "dismissed",
                    "type": "boolean",
                    "primaryKey": false,
                    "notNull": true,
                    "default": false
                },
                "type": {
                    "name": "type",
                    "type": "notification_type",
                    "typeSchema": "public",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "'info'"
                },
                "channel": {
                    "name": "channel",
                    "type": "notification_channel",
                    "typeSchema": "public",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "'in_app'"
                },
                "link": {
                    "name": "link",
                    "type": "varchar",
                    "primaryKey": false,
                    "notNull": false
                },
                "content": {
                    "name": "content",
                    "type": "varchar",
                    "primaryKey": false,
                    "notNull": true
                },
                "expires_at": {
                    "name": "expires_at",
                    "type": "timestamp",
                    "primaryKey": false,
                    "notNull": false,
                    "default": "(now() + '1 mon'::interval)"
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "notification_user_id_fkey": {
                    "name": "notification_user_id_fkey",
                    "tableFrom": "notification",
                    "tableTo": "user",
                    "schemaTo": "public",
                    "columnsFrom": ["user_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {},
            "checkConstraints": {},
            "policies": {
                "notification_all": {
                    "name": "notification_all",
                    "as": "PERMISSIVE",
                    "for": "ALL",
                    "to": ["authenticated"],
                    "withCheck": "(EXISTS ( SELECT 1\n   FROM \"user\"\n  WHERE ((\"user\".id = notification.user_id) AND (\"user\".auth_user_id = auth.uid()))))",
                    "using": "(EXISTS ( SELECT 1\n   FROM \"user\"\n  WHERE ((\"user\".id = notification.user_id) AND (\"user\".auth_user_id = auth.uid()))))"
                }
            },
            "isRLSEnabled": true
        },
        "public.organization": {
            "name": "organization",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "name": {
                    "name": "name",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": true
                },
                "slug": {
                    "name": "slug",
                    "type": "text",
                    "primaryKey": false,
                    "notNull": true
                },
                "address": {
                    "name": "address",
                    "type": "varchar",
                    "primaryKey": false,
                    "notNull": false
                },
                "email": {
                    "name": "email",
                    "type": "varchar(320)",
                    "primaryKey": false,
                    "notNull": false
                },
                "website": {
                    "name": "website",
                    "type": "varchar(320)",
                    "primaryKey": false,
                    "notNull": false
                },
                "logo_url": {
                    "name": "logo_url",
                    "type": "varchar(1000)",
                    "primaryKey": false,
                    "notNull": false
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {},
            "compositePrimaryKeys": {},
            "uniqueConstraints": {
                "organization_slug_key": {
                    "columns": ["slug"],
                    "nullsNotDistinct": false,
                    "name": "organization_slug_key"
                },
                "organization_email_key": {
                    "columns": ["email"],
                    "nullsNotDistinct": false,
                    "name": "organization_email_key"
                }
            },
            "checkConstraints": {},
            "policies": {
                "organization_create": {
                    "name": "organization_create",
                    "as": "PERMISSIVE",
                    "for": "INSERT",
                    "to": ["authenticated"],
                    "withCheck": "true"
                },
                "organization_read": {
                    "name": "organization_read",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["authenticated"]
                },
                "organization_update": {
                    "name": "organization_update",
                    "as": "PERMISSIVE",
                    "for": "UPDATE",
                    "to": ["authenticated"]
                },
                "organization_delete": {
                    "name": "organization_delete",
                    "as": "PERMISSIVE",
                    "for": "DELETE",
                    "to": ["authenticated"]
                }
            },
            "isRLSEnabled": true
        },
        "public.organization_role": {
            "name": "organization_role",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "name": {
                    "name": "name",
                    "type": "varchar(100)",
                    "primaryKey": false,
                    "notNull": true
                },
                "hierarchy_level": {
                    "name": "hierarchy_level",
                    "type": "integer",
                    "primaryKey": false,
                    "notNull": true
                },
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "organization_role_organization_id_fkey": {
                    "name": "organization_role_organization_id_fkey",
                    "tableFrom": "organization_role",
                    "tableTo": "organization",
                    "schemaTo": "public",
                    "columnsFrom": ["organization_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {
                "organization_role_name_organization_id_key": {
                    "columns": ["name", "organization_id"],
                    "nullsNotDistinct": false,
                    "name": "organization_role_name_organization_id_key"
                }
            },
            "checkConstraints": {},
            "policies": {
                "organization_role_read": {
                    "name": "organization_role_read",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["authenticated"],
                    "using": "kit.user_is_member_of_org(organization_id)"
                },
                "organization_role_insert": {
                    "name": "organization_role_insert",
                    "as": "PERMISSIVE",
                    "for": "INSERT",
                    "to": ["authenticated"]
                },
                "organization_role_update": {
                    "name": "organization_role_update",
                    "as": "PERMISSIVE",
                    "for": "UPDATE",
                    "to": ["authenticated"]
                },
                "organization_role_delete": {
                    "name": "organization_role_delete",
                    "as": "PERMISSIVE",
                    "for": "DELETE",
                    "to": ["authenticated"]
                }
            },
            "isRLSEnabled": true
        },
        "public.organization_role_permission": {
            "name": "organization_role_permission",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "role_id": {
                    "name": "role_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "permission": {
                    "name": "permission",
                    "type": "org_permission",
                    "typeSchema": "public",
                    "primaryKey": false,
                    "notNull": true
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "organization_role_permission_role_id_fkey": {
                    "name": "organization_role_permission_role_id_fkey",
                    "tableFrom": "organization_role_permission",
                    "tableTo": "organization_role",
                    "schemaTo": "public",
                    "columnsFrom": ["role_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                },
                "organization_role_permission_organization_id_fkey": {
                    "name": "organization_role_permission_organization_id_fkey",
                    "tableFrom": "organization_role_permission",
                    "tableTo": "organization",
                    "schemaTo": "public",
                    "columnsFrom": ["organization_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {
                "organization_role_permission_role_id_permission_key": {
                    "columns": ["role_id", "permission"],
                    "nullsNotDistinct": false,
                    "name": "organization_role_permission_role_id_permission_key"
                }
            },
            "checkConstraints": {},
            "policies": {
                "organization_role_permission_read": {
                    "name": "organization_role_permission_read",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["authenticated"],
                    "using": "kit.user_is_member_of_org(organization_id)"
                },
                "organization_role_permission_insert": {
                    "name": "organization_role_permission_insert",
                    "as": "PERMISSIVE",
                    "for": "INSERT",
                    "to": ["authenticated"]
                },
                "organization_role_permission_update": {
                    "name": "organization_role_permission_update",
                    "as": "PERMISSIVE",
                    "for": "UPDATE",
                    "to": ["authenticated"]
                },
                "organization_role_permission_delete": {
                    "name": "organization_role_permission_delete",
                    "as": "PERMISSIVE",
                    "for": "DELETE",
                    "to": ["authenticated"]
                }
            },
            "isRLSEnabled": true
        },
        "public.organization_member": {
            "name": "organization_member",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "is_owner": {
                    "name": "is_owner",
                    "type": "boolean",
                    "primaryKey": false,
                    "notNull": true,
                    "default": false
                },
                "role_id": {
                    "name": "role_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "user_id": {
                    "name": "user_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "organization_member_role_id_fkey": {
                    "name": "organization_member_role_id_fkey",
                    "tableFrom": "organization_member",
                    "tableTo": "organization_role",
                    "schemaTo": "public",
                    "columnsFrom": ["role_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                },
                "organization_member_user_id_fkey": {
                    "name": "organization_member_user_id_fkey",
                    "tableFrom": "organization_member",
                    "tableTo": "user",
                    "schemaTo": "public",
                    "columnsFrom": ["user_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                },
                "organization_member_organization_id_fkey": {
                    "name": "organization_member_organization_id_fkey",
                    "tableFrom": "organization_member",
                    "tableTo": "organization",
                    "schemaTo": "public",
                    "columnsFrom": ["organization_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {
                "organization_member_user_id_organization_id_key": {
                    "columns": ["user_id", "organization_id"],
                    "nullsNotDistinct": false,
                    "name": "organization_member_user_id_organization_id_key"
                }
            },
            "checkConstraints": {},
            "policies": {
                "organization_member_create": {
                    "name": "organization_member_create",
                    "as": "PERMISSIVE",
                    "for": "INSERT",
                    "to": ["authenticated"],
                    "withCheck": "kit.user_is_invited_to_org(organization_id)"
                },
                "organization_member_read": {
                    "name": "organization_member_read",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["authenticated"]
                },
                "organization_member_update": {
                    "name": "organization_member_update",
                    "as": "PERMISSIVE",
                    "for": "UPDATE",
                    "to": ["authenticated"]
                },
                "organization_member_delete": {
                    "name": "organization_member_delete",
                    "as": "PERMISSIVE",
                    "for": "DELETE",
                    "to": ["authenticated"]
                }
            },
            "isRLSEnabled": true
        },
        "public.organization_invitation": {
            "name": "organization_invitation",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "email": {
                    "name": "email",
                    "type": "varchar(320)",
                    "primaryKey": false,
                    "notNull": true
                },
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "role_id": {
                    "name": "role_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "invite_token": {
                    "name": "invite_token",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "gen_random_uuid()"
                },
                "invited_by": {
                    "name": "invited_by",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "auth.uid()"
                },
                "expires_at": {
                    "name": "expires_at",
                    "type": "timestamp",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "(now() + '7 days'::interval)"
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "organization_invitation_organization_id_fkey": {
                    "name": "organization_invitation_organization_id_fkey",
                    "tableFrom": "organization_invitation",
                    "tableTo": "organization",
                    "schemaTo": "public",
                    "columnsFrom": ["organization_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                },
                "organization_invitation_role_id_fkey": {
                    "name": "organization_invitation_role_id_fkey",
                    "tableFrom": "organization_invitation",
                    "tableTo": "organization_role",
                    "schemaTo": "public",
                    "columnsFrom": ["role_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                },
                "organization_invitation_invited_by_fkey": {
                    "name": "organization_invitation_invited_by_fkey",
                    "tableFrom": "organization_invitation",
                    "tableTo": "user",
                    "schemaTo": "public",
                    "columnsFrom": ["invited_by"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {
                "organization_invitation_email_organization_id_key": {
                    "columns": ["email", "organization_id"],
                    "nullsNotDistinct": false,
                    "name": "organization_invitation_email_organization_id_key"
                },
                "organization_invitation_invite_token_key": {
                    "columns": ["invite_token"],
                    "nullsNotDistinct": false,
                    "name": "organization_invitation_invite_token_key"
                }
            },
            "checkConstraints": {},
            "policies": {
                "organization_invitation_create": {
                    "name": "organization_invitation_create",
                    "as": "PERMISSIVE",
                    "for": "INSERT",
                    "to": ["authenticated"],
                    "withCheck": "(kit.user_is_member_of_org(organization_id) AND kit.has_org_permission(organization_id, 'invitation.manage'::org_permission))"
                },
                "organization_invitation_read": {
                    "name": "organization_invitation_read",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["authenticated"]
                },
                "organization_invitation_update": {
                    "name": "organization_invitation_update",
                    "as": "PERMISSIVE",
                    "for": "UPDATE",
                    "to": ["authenticated"]
                },
                "organization_invitation_delete": {
                    "name": "organization_invitation_delete",
                    "as": "PERMISSIVE",
                    "for": "DELETE",
                    "to": ["authenticated"]
                }
            },
            "isRLSEnabled": true
        },
        "public.organization_setting": {
            "name": "organization_setting",
            "schema": "",
            "columns": {
                "id": {
                    "name": "id",
                    "type": "uuid",
                    "primaryKey": true,
                    "notNull": true,
                    "default": "uuid_generate_v4()"
                },
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "name": {
                    "name": "name",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": true
                },
                "value": {
                    "name": "value",
                    "type": "json",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "'{\"json\":null}'::json"
                },
                "updated_at": {
                    "name": "updated_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                },
                "created_at": {
                    "name": "created_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": true,
                    "default": "now()"
                }
            },
            "indexes": {},
            "foreignKeys": {
                "organization_setting_organization_id_fkey": {
                    "name": "organization_setting_organization_id_fkey",
                    "tableFrom": "organization_setting",
                    "tableTo": "organization",
                    "schemaTo": "public",
                    "columnsFrom": ["organization_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {},
            "uniqueConstraints": {},
            "checkConstraints": {},
            "policies": {
                "organization_setting_all": {
                    "name": "organization_setting_all",
                    "as": "PERMISSIVE",
                    "for": "ALL",
                    "to": ["authenticated"],
                    "withCheck": "(kit.user_is_member_of_org(organization_id) AND kit.has_org_permission(organization_id, 'setting.manage'::org_permission))",
                    "using": "(kit.user_is_member_of_org(organization_id) AND kit.has_org_permission(organization_id, 'setting.manage'::org_permission))"
                }
            },
            "isRLSEnabled": true
        },
        "public.booking_tag_assignment": {
            "name": "booking_tag_assignment",
            "schema": "",
            "columns": {
                "booking_id": {
                    "name": "booking_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "tag_id": {
                    "name": "tag_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": true
                },
                "assigned_at": {
                    "name": "assigned_at",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": false,
                    "default": "now()"
                }
            },
            "indexes": {
                "idx_booking_tag_assignment_booking_id": {
                    "name": "idx_booking_tag_assignment_booking_id",
                    "columns": [
                        {
                            "expression": "booking_id",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "uuid_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                },
                "idx_booking_tag_assignment_tag_id": {
                    "name": "idx_booking_tag_assignment_tag_id",
                    "columns": [
                        {
                            "expression": "tag_id",
                            "asc": true,
                            "nulls": "last",
                            "opclass": "uuid_ops",
                            "isExpression": false
                        }
                    ],
                    "isUnique": false,
                    "concurrently": false,
                    "method": "btree",
                    "with": {}
                }
            },
            "foreignKeys": {
                "booking_tag_assignment_booking_id_fkey": {
                    "name": "booking_tag_assignment_booking_id_fkey",
                    "tableFrom": "booking_tag_assignment",
                    "tableTo": "booking",
                    "schemaTo": "public",
                    "columnsFrom": ["booking_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                },
                "booking_tag_assignment_tag_id_fkey": {
                    "name": "booking_tag_assignment_tag_id_fkey",
                    "tableFrom": "booking_tag_assignment",
                    "tableTo": "booking_tag",
                    "schemaTo": "public",
                    "columnsFrom": ["tag_id"],
                    "columnsTo": ["id"],
                    "onDelete": "cascade",
                    "onUpdate": "no action"
                }
            },
            "compositePrimaryKeys": {
                "booking_tag_assignment_pkey": {
                    "name": "booking_tag_assignment_pkey",
                    "columns": ["booking_id", "tag_id"]
                }
            },
            "uniqueConstraints": {},
            "checkConstraints": {},
            "policies": {
                "Users can view booking tag assignments": {
                    "name": "Users can view booking tag assignments",
                    "as": "PERMISSIVE",
                    "for": "SELECT",
                    "to": ["public"],
                    "using": "(booking_id IN ( SELECT b.id\n   FROM booking b\n  WHERE (b.organization_id IN ( SELECT m.organization_id\n           FROM organization_member m\n          WHERE (m.user_id = auth.uid())))))"
                },
                "Users can manage booking tag assignments": {
                    "name": "Users can manage booking tag assignments",
                    "as": "PERMISSIVE",
                    "for": "ALL",
                    "to": ["public"]
                }
            },
            "isRLSEnabled": true
        }
    },
    "enums": {
        "public.booking_status": {
            "name": "booking_status",
            "values": ["pending", "confirmed", "cancelled", "completed"],
            "schema": "public"
        },
        "public.booking_type": {
            "name": "booking_type",
            "values": ["consultation", "service", "appointment", "reservation"],
            "schema": "public"
        },
        "public.notification_channel": {
            "name": "notification_channel",
            "values": ["in_app", "email"],
            "schema": "public"
        },
        "public.notification_type": {
            "name": "notification_type",
            "values": ["info", "warning", "error"],
            "schema": "public"
        },
        "public.org_permission": {
            "name": "org_permission",
            "values": [
                "role.manage",
                "organization.manage",
                "member.manage",
                "invitation.manage",
                "setting.manage",
                "media.manage"
            ],
            "schema": "public"
        }
    },
    "schemas": {},
    "sequences": {},
    "roles": {},
    "policies": {},
    "views": {
        "public.booking_analytics": {
            "name": "booking_analytics",
            "schema": "public",
            "columns": {
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": false
                },
                "booking_date": {
                    "name": "booking_date",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": false
                },
                "type": {
                    "name": "type",
                    "type": "booking_type",
                    "typeSchema": "public",
                    "primaryKey": false,
                    "notNull": false
                },
                "status": {
                    "name": "status",
                    "type": "booking_status",
                    "typeSchema": "public",
                    "primaryKey": false,
                    "notNull": false
                },
                "booking_count": {
                    "name": "booking_count",
                    "type": "bigint",
                    "primaryKey": false,
                    "notNull": false
                },
                "unique_customers": {
                    "name": "unique_customers",
                    "type": "bigint",
                    "primaryKey": false,
                    "notNull": false
                },
                "total_revenue": {
                    "name": "total_revenue",
                    "type": "numeric",
                    "primaryKey": false,
                    "notNull": false
                },
                "avg_duration_minutes": {
                    "name": "avg_duration_minutes",
                    "type": "numeric",
                    "primaryKey": false,
                    "notNull": false
                },
                "online_bookings": {
                    "name": "online_bookings",
                    "type": "bigint",
                    "primaryKey": false,
                    "notNull": false
                },
                "offline_bookings": {
                    "name": "offline_bookings",
                    "type": "bigint",
                    "primaryKey": false,
                    "notNull": false
                }
            },
            "isExisting": false,
            "definition": "SELECT b.organization_id, date_trunc('day'::text, b.start_date) AS booking_date, b.type, b.status, count(*) AS booking_count, count(DISTINCT b.customer_email) AS unique_customers, sum(b.price) AS total_revenue, avg(b.duration_minutes) AS avg_duration_minutes, count( CASE WHEN b.is_online THEN 1 ELSE NULL::integer END) AS online_bookings, count( CASE WHEN NOT b.is_online THEN 1 ELSE NULL::integer END) AS offline_bookings FROM booking b GROUP BY b.organization_id, (date_trunc('day'::text, b.start_date)), b.type, b.status",
            "materialized": false
        },
        "public.most_booked_customers": {
            "name": "most_booked_customers",
            "schema": "public",
            "columns": {
                "organization_id": {
                    "name": "organization_id",
                    "type": "uuid",
                    "primaryKey": false,
                    "notNull": false
                },
                "customer_email": {
                    "name": "customer_email",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": false
                },
                "customer_name": {
                    "name": "customer_name",
                    "type": "varchar(255)",
                    "primaryKey": false,
                    "notNull": false
                },
                "total_bookings": {
                    "name": "total_bookings",
                    "type": "bigint",
                    "primaryKey": false,
                    "notNull": false
                },
                "completed_bookings": {
                    "name": "completed_bookings",
                    "type": "bigint",
                    "primaryKey": false,
                    "notNull": false
                },
                "cancelled_bookings": {
                    "name": "cancelled_bookings",
                    "type": "bigint",
                    "primaryKey": false,
                    "notNull": false
                },
                "total_spent": {
                    "name": "total_spent",
                    "type": "numeric",
                    "primaryKey": false,
                    "notNull": false
                },
                "last_booking_date": {
                    "name": "last_booking_date",
                    "type": "timestamp with time zone",
                    "primaryKey": false,
                    "notNull": false
                }
            },
            "isExisting": false,
            "definition": "SELECT b.organization_id, b.customer_email, b.customer_name, count(*) AS total_bookings, count( CASE WHEN b.status = 'completed'::booking_status THEN 1 ELSE NULL::integer END) AS completed_bookings, count( CASE WHEN b.status = 'cancelled'::booking_status THEN 1 ELSE NULL::integer END) AS cancelled_bookings, sum(b.price) AS total_spent, max(b.created_at) AS last_booking_date FROM booking b GROUP BY b.organization_id, b.customer_email, b.customer_name ORDER BY (count(*)) DESC",
            "materialized": false
        }
    },
    "_meta": {
        "schemas": {},
        "tables": {},
        "columns": {}
    },
    "internal": {
        "tables": {
            "notification": {
                "columns": {
                    "expires_at": {
                        "isDefaultAnExpression": true
                    }
                }
            },
            "organization_invitation": {
                "columns": {
                    "expires_at": {
                        "isDefaultAnExpression": true
                    }
                }
            }
        }
    }
}
